## AD画法

元件符号(原理图)由元件边框、管脚、元件名称及元件说明组成。
property(属性)的name+“\”：名字上面有横杠；description(描述);add link(名字+官网链接)；designator(位号)；footprint(封装 0603 0805 0402);IC: Integrated Circuit(集成电路)
shift+拖动 = 复制管脚 pin length = 100mil
更改引脚名字位置name->custom position->orientation 
管脚号与焊盘的位置一一对应；阵列粘贴：同时粘贴多个器件或引脚
空格改变方向；镜像：粘贴情况下按“y”；T+A+A:快捷标注
工具->封装管理器：所有同类型选中+编辑、创建ECO
R+P:测量距离
右键垂直分割，分屏画图

#### 原理图绘制

元件复制：shift+拖动选中元件；shift+ctrl+l:左对齐
绘制工具：线：shift+空格改变线方向
ctrl+w：电气属性的线 ；netlabel：网络标签
导出bom表、
单栏->工程->工程选项
右键sch原理图：compile查找error：①器件位号重复(封装管理器查找缺值)②floating netlabels③net with only pin
选中原理图：右键，compile编译查找报错
3D模型：overheight实体高度；ctrl+d切换3D视图；shift+右键：旋转模型
IC封装网
JC：查询位号

### PCB布局及布线

导入常见报错及解决方法：①没有封装②封装管脚缺失③管脚号不匹配
绿色报错的消除：TM(隐藏绿色报错)，设计规则检查器中隐藏不必要检查的规则
原理图导入PCB：设计：update (工程变更指令时room不add)
工具：器件摆放->在矩形框中排列；在机械层绘制一个大概的框架
D+S+D：快速重新定义板框			叠层设置：四层板(多一个电源层和地层，更好走线)；信号质量更好(多了一个地层) 
D+K：层叠管理设置
固定孔：四周距离各5mm
正片设计：默认无铜的，走线和铺铜的地方意味着铜保留，没有走线的和铺铜的地方被清除(signal)
负片设计：默认有铜的， 走线和铺铜的地方意味着这里的铜被清除，没有走线和铺铜的地方铜被保留 (plane)
一般来讲，顶层、底层走线，采用正片设计；内层的电源层、地层不走信号，而是要大面积铺铜。![1642840578658](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1642840578658.png)
工具->交叉选择模式：pcb和原理图同时反映
隐藏电源网络；D+C：创建电源网络类
布局时把飞线全部隐藏		选中器件，右键查找相似对象，改小尺寸
ctrl+A(全选)+右键：P定位器件文本
长按shift，高亮元器件

#### 芯片布局规则：

①先大后小原则：重要的单元电路、核心元器件应当优先布局。根据单板的主信号流向规律安排主要元器件。
②布局应尽量满足以下要求：总的连线尽可能短，关键信号线最短；去耦电容的布局要尽量靠近IC的电源管脚，并使之与电源和地之间形成的回路最短 ；减少信号跑的冤枉路，防止在路上出意外
③元器件的排列要便于调试和维修，亦即小元件周围不能放置大元件、需调试的元器件周围要有足够的空间
④ 相同结构电路部分，尽可能采用“对称式”标准布局；按照均匀分布、重心平衡、版面美观的标准优化布局
⑤同类型插装元器件在X或Y方向上应朝一个方向放置。同一种类型的有极性分立元件也要力争在X或Y方向上保持一致，便于生产和检验
⑥高电压、大电流信号与小电流，低电压的弱信号完全分开；模拟信号与数字信号分开；高频信号与低频信号分开；高频元器件的间隔要充分。元件布局时，应适当考虑使用同一种电源的器件尽量放在一起，以便于将来的电源分隔。
布线的自助指南可以简单的总结为：
1、尽量为时钟信号、高频信号、敏感信号等关键信号提供专门的布线层，并保证其最小的回路面积。必要时应采取手工优先布线、屏蔽和加大安全间距等方法，保证信号质量。
2、电源层和地层之间的EMC环境较差，应避免布置对干扰敏感的信号。
3、有阻抗控制要求的网络应尽量按线长线宽要求布线。

#### 设计规则

区分电源线和信号线：对颜色进行设置；电源做载流：线宽需加大
design：electrical电气规则、 间距规则：6mil生产成本最低 6>x>4 
新建线宽规则：电源线VCC(6mil)、信号线(6mil)、V5(15-20mil)、V12(30mil)、V24(30-50mil)
过孔规则(routing via style):2*H+-2mil     (参数设置：PCB Editor->defaults->via)
planeconnect(焊盘)；(反焊盘)planeclearance：间距一般为8mil
手工焊：十字连接；过大电流：全连接；一般过孔采用全连接
manufaturing->silk to solder mask clearance(为防止油墨印在焊盘上)对象与丝印层的最小间距2mil

## 硬件常识

干簧管(磁开关)：磁铁靠近干簧管时，两个簧片被磁化而接通( 具有结构简单，体积小便于控制)
GND=Ground，也就是最普通的地，一般认为是电路中的参考地。
DGND=Digital Ground，也就是数字地，通常用于数字电路上。
AGND=Analog Ground，也就是模拟地，通常用于模拟电路上。在电路设计中，严格来说，梳子地和模拟地要隔离，防止相互干扰。数字地上的谐波成分要远多于模拟地，公地会影响模拟地的稳定性。
PGND=Ptotect Ground，也就是保护地，一般用于机壳，作为危险电流的泄放通道。
VDD、VCC常用于表示数字电路的电源+，如5V、3.3V.
VSS常用于表示数字电路的电源公共端，VSS是数字电源负极。
AVDD一般用于表示模拟电路电源。
DVDD一般在有模拟电源的情况下才使用，表示数字电路电源+。
在没有模拟电路电源情况下，一般用VDD、VCC表示。
阻焊层：pcb铺绿油的地方
NTC：负温度系数， Rt = RT0*EXP(Bn*（1/T-1/T0)） (开关电路中防止电流过大)

##### 焊盘

用于电气连接、器件固定或两者兼备的部分导电图形
方形焊盘 ：元器件大而少、且印制导线简单时多采用 
圆形焊盘：广泛用于元件规则排列的单、双面印制板 
岛形焊盘：焊盘与焊盘间的连线合为一体。常用于立式不规则排列安装中 
椭圆形焊盘：这种焊盘有足够的面积增强抗剥能力，常用于双列直插式器件 
十字花焊盘 ：减少焊盘在焊接中向外散热，以防止因过度散热而导致的虚焊或PCB起皮 
泪滴焊盘： 走线较细时常采用，以防焊盘起皮、走线与焊盘断开。这种焊盘常用在高频电路 

# MOS

mos的作用：开关、隔离和可调电阻
nmos管控制电平为1时导通，为0时截止；pmos管控制电平为0时导通，为1时截止；
nmos的作用：开关和Tds(on)的电阻串联
nmos的方向：箭头向里，与箭头同线的一般为源极接地；pmos的方向：箭头向外，与箭头同线的一般为源极接VCC
栅极G、源极S、漏极D
寄生二极管的方向：N沟道，S->D;P沟道，D->S
八脚封装mos：D极单独一边，G极第4pin，S极为剩下3个pin

![1642552572916](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1642552572916.png)

![1642552610837](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1642552610837.png)


mos管的参数
 ![在这里插入图片描述](https://img-blog.csdnimg.cn/20190927110915464.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNTk3OTcx,size_16,color_FFFFFF,t_70) 

 1、**VDSS 最大漏-源电压**
在栅源短接，漏-源额定电压(VDSS)是指漏-源未发生雪崩击穿前所能施加的最大电压。根据温度的不同，实际雪崩击穿电压可能低于额定VDSS。关于V(BR)DSS的详细描述请参见静电学特性 
2、 **VGS 最大栅源电压**
VGS额定电压是栅源两极间可以施加的最大电压。设定该额定电压的主要目的是防止电压过高导致的栅氧化层损伤。实际栅氧化层可承受的电压远高于额定电压，但是会随制造工艺的不同而改变，因此保持VGS在额定电压以内可以保证应用的可靠性 
3、 **ID - 连续漏电流**
ID定义为芯片在最大额定结温TJ(max)下，管表面温度在25℃或者更高温度下，可允许的最大连续直流电流 
4、IDM - 脉冲漏极电流
该参数反映了器件可以处理的脉冲电流的高低，脉冲电流要远高于连续的直流电流。定义IDM的目的在于：线的欧姆区。对于一定的栅-源电压，MOSFET导通后，存在最大的漏极电流。如图所示，对于给定的一个栅-源电压，如果工作点位于线性区域内，漏极电流的增大会提高漏-源电压，由此增大导通损耗。长时间工作在大功率之下，将导致器件失效。因此，在典型栅极驱动电压下，需要将额定IDM设定在区域之下。区域的分界点在Vgs和曲线相交点。
5、 **PD - 容许沟道总功耗**
容许沟道总功耗标定了器件可以消散的最大功耗，可以表示为最大结温和管壳温度为25℃时热阻的函数。 
6、 **EAS - 单脉冲雪崩击穿能量**
如果电压过冲值(通常由于漏电流和杂散电感造成)未超过击穿电压，则器件不会发生雪崩击穿，因此也就不需要消散雪崩击穿的能力。雪崩击穿能量标定了器件可以容忍的瞬时过冲电压的安全值，其依赖于雪崩击穿需要消散的能量。 
7、 **EAR - 重复雪崩能量**
额定EAR的真实意义在于标定了器件所能承受的反复雪崩击穿能量。该定义的前提条件是：不对频率做任何限制，从而器件不会过热，这对于任何可能发生雪崩击穿的器件都是现实的。在验证器件设计的过程中，最好可以测量处于工作状态的器件或者热沉的温度，来观察MOSFET器件是否存在过热情况，特别是对于可能发生雪崩击穿的器件。
8、 **IAR - 雪崩击穿电流**
对于某些器件，雪崩击穿过程中芯片上电流集边的倾向要求对雪崩电流IAR进行限制 
9、 **静态电特性** 
 ![在这里插入图片描述](https://img-blog.csdnimg.cn/20190927111114935.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNTk3OTcx,size_16,color_FFFFFF,t_70) 
V(BR)DSS：漏-源击穿电压(破坏电压)
V(BR)DSS（有时候叫做VBDSS）是指在特定的温度和栅源短接情况下，流过漏极电流达到一个特定值时的漏源电压。这种情况下的漏源电压为雪崩击穿电压。
V(BR)DSS是正温度系数，温度低时V(BR)DSS小于25℃时的漏源电压的最大额定值。在-50℃, V(BR)DSS大约是25℃时最大漏源额定电压的90%。
VGS(th)，VGS(off)：阈值电压
VGS(th)是指加的栅源电压能使漏极开始有电流，或关断MOSFET时电流消失时的电压，测试的条件（漏极电流，漏源电压，结温）也是有规格的。正常情况下，所有的MOS栅极器件的阈值电压都会有所不同。因此，VGS(th)的变化范围是规定好的。VGS(th)是负温度系数，当温度上升时，MOSFET将会在比较低的栅源电压下开启。
RDS(on)：导通电阻
RDS(on)是指在特定的漏电流（通常为ID电流的一半）、栅源电压和25℃的情况下测得的漏-源电阻。

IDSS：零栅压漏极电流
IDSS是指在当栅源电压为零时，在特定的漏源电压下的漏源之间泄漏电流。既然泄漏电流随着温度的增加而增大，IDSS在室温和高温下都有规定。漏电流造成的功耗可以用IDSS乘以漏源之间的电压计算，通常这部分功耗可以忽略不计。
IGSS ―栅源漏电流
IGSS是指在特定的栅源电压情况下流过栅极的漏电流。

10、 **动态电特性** 
 ![在这里插入图片描述](https://img-blog.csdnimg.cn/2019092711114212.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNTk3OTcx,size_16,color_FFFFFF,t_70) 

Ciss ：输入电容
将漏源短接，用交流信号测得的栅极和源极之间的电容就是输入电容。Ciss是由栅漏电容Cgd和栅源电容Cgs并联而成，或者Ciss = Cgs +Cgd。当输入电容充电致阈值电压时器件才能开启，放电致一定值时器件才可以关断。因此驱动电路和Ciss对器件的开启和关断延时有着直接的影响。
Coss ：输出电容
将栅源短接，用交流信号测得的漏极和源极之间的电容就是输出电容。Coss是由漏源电容Cds和栅漏电容Cgd并联而成，或者Coss = Cds +Cgd对于软开关的应用，Coss非常重要，因为它可能引起电路的谐振。
Crss ：反向传输电容
在源极接地的情况下，测得的漏极和栅极之间的电容为反向传输电容。反向传输电容等同于栅漏电容。Cres =Cgd，反向传输电容也常叫做米勒电容，对于开关的上升和下降时间来说是其中一个重要的参数，他还影响这关断延时时间。电容随着漏源电压的增加而减小，尤其是输出电容和反向传输电容。

## 电阻

电阻分类：直插、贴片与印刷电阻
电阻参数：精度、温度系数(PPM)与功率
贴片电阻功率最大差不多1w，采用直插电阻扩大功率 
传感器电阻：热敏电阻、光敏电阻、压敏电阻、湿敏电阻

## 电容

直插电容和贴片电容(MLCC片式多层陶瓷电容)
NP0/C0G(信号路径、滤波、低失真、音频)、Y5V、X7R(去耦合和其他应用)、X5R
参数：精度(max0.1％)、温度系数、耐压、温度范围和ESR(等效串联电阻)
耐压：电容量随两端电压增大而减小，实际使用留80％的裕量
钽电容：AVX、KEMET、VISHAY、NEC、NICHICON、三星；黄钽、黑钽

参数：精度(max0.1％)、温度系数、耐压、温度范围和ESR

## 三极管

NPN型和PNP型
三极管作用：放大和开关
![1642608557564](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1642608557564.png)

IB基极电流、IC集电极电流、IE发射极电流 IC+IB = IE、IC IE>> IB 放大倍数Au =IC/IB
三极管区域：饱和区、放大区、截止区以及温度对特性的影响
![1643872804135](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1643872804135.png)

#### 升压电路，通过Y引脚输出的5v电压逐步抬升ALWP的电压至15v

#### 元器件损伤

电阻类：接触损坏、开路
电容类：击穿、机械损伤、电解液泄露
电感类：变压器的温度升高、负载短路、线圈经过的电流过大

### BUCK降压电路

斩波电路，降压式变换器(LM2576降压集成芯片)![1644411713606](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1644411713606.png)

①：T导通，电感储能，电流缓慢增加，C充电
②：T关断，电感释放能量，继续向C充电，低于电源电压![1644412560046](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1644412560046.png)
电路中：输入滤波电容，输出稳压电容
![1644412720228](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1644412720228.png)
可调电压：通过调节两个电阻阻值调节输出电压

## boost升压电路

![1644415453665](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1644415453665.png)


### 电流感应放大器![1643875251463](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1643875251463.png)

运放有极大开环增益且低成本，但准确度需要昂贵外设维系且共模电压限制为电源电压；差分放大可以将较小的信号转换为较大的单端信号；CSA电流检测放大器具有高性能，但仅提供固定增益。分流电阻放在负载与电源电压之间。共模电压等于Vp、Vn的平均值。避免干扰负载检测到的接地

### ADC采样![1643875923446](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1643875923446.png)

N为ADC的位数， 信噪比为measured dB，理想ADC仅考虑量化噪声![1643876158307](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1643876158307.png)
THD+N和SINAD会比THD大，考虑了非线性和噪声的影响
谐波和噪声为两种因素 ![1643876353992](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1643876353992.png)

采样频率为1Mhz，采16个点，平均1us采一个点，输入信号为125khz，则增益为2；若输入不为整数，则发生频谱泄漏，时域加窗可以解决这个问题

## LARIO莱洛三角形

CS5095芯片![1644404442663](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1644404442663.png)NTC引脚检测电池温度的高低；温度超过设定的窗口值时，停止充电； R3为82k欧电阻，R_NTC为负温度系数电阻，即温度升高，电阻阻值降低。基于这个原理来判断芯片是否充电过热 

AS5600磁编码器：![1644407283972](C:\Users\mountainlee_33\AppData\Roaming\Typora\typora-user-images\1644407283972.png)

